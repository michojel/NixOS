Index: nodejs/composition-v10.nix
===================================================================
--- nodejs.orig/composition-v10.nix
+++ nodejs/composition-v10.nix
@@ -12,6 +12,6 @@ let
   };
 in
 import ./node-packages-v10.nix {
-  inherit (pkgs) fetchurl fetchgit;
+  inherit (pkgs) fetchurl fetchgit writeTextFile;
   inherit nodeEnv;
-}
\ No newline at end of file
+}
Index: nodejs/node-packages-v10.nix
===================================================================
--- nodejs.orig/node-packages-v10.nix
+++ nodejs/node-packages-v10.nix
@@ -1,6 +1,6 @@
 # This file has been generated by node2nix 1.7.0. Do not edit!
 
-{nodeEnv, fetchurl, fetchgit, globalBuildInputs ? []}:
+{nodeEnv, fetchurl, fetchgit, writeTextFile, globalBuildInputs ? []}:
 
 let
   sources = {
@@ -1860,6 +1860,14 @@ in
       url = "https://registry.npmjs.org/@google/clasp/-/clasp-2.2.1.tgz";
       sha512 = "dUdEBfwOuC1d95o1ntZ+4a60M65q2vwvHvgD22bPCx+OU0m+ZUBs5rZSloh/IGDjEVqFbDsHU6SLgM0x3MOhgA==";
     };
+    preRebuild = let
+      dotf-patch = writeTextFile {
+        name = "dotf.patch";
+        text = builtins.readFile ./patches/dotf.patch;
+      };
+    in ''
+      patch -p1 <"${dotf-patch}"
+    '';
     dependencies = [
       sources."@nodelib/fs.scandir-2.1.1"
       sources."@nodelib/fs.stat-2.0.1"
@@ -2099,4 +2107,4 @@ in
     bypassCache = true;
     reconstructLock = true;
   };
-}
\ No newline at end of file
+}
